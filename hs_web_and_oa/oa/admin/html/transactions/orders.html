<!DOCTYPE html>
<html style="font-size:20px;">

<head>
    <meta name="renderer" content="webkit">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Honey Share</title>
    <link rel="stylesheet" href="../../css/bootstrap.css">
    <link rel="stylesheet" href="../../css/basics.css">
    <link rel="stylesheet" href="../../css/home.css">
    <style>
        .box h4 {
            font-weight: normal;
            font-size: 16px;
            color: #aaa;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="title">
                <p>订单</p>
            </div>
            <div class="centent">
                <div class="box">
                    <!-- <div class="col-sm-12">
                        <button class="export" download>导出</button>
                    </div> -->
                    <div class="bt">
                        <input type="text" placeholder="输入邮箱" class="mail">
                        <span class="search">搜索</span>
                    </div>
                    <div class="col-sm-12">
                        <div class="">
                            <table class="addChild">
                                <tr class="addTr">
                                    <!-- <th>订单号</th> -->
                                    <th>邮箱</th>
                                    <td>创建时间</td>
                                    <th>成功时间</th>
                                    <td>支付方式</td>
                                    <td>美元</td>
                                    <td>人民币</td>
                                    <td>HSC</td>
                                    <th>汇率</th>
                                </tr>
                            </table>
                            <div class="text">没有找到记录。</div>
                        </div>
                        <nav aria-label="Page navigation" class="col-xs-12 col-sm-12 col-lg-12 paging">
                            <ul class="pagination">
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../../lib/jquery-1.12.2.js"></script>
    <script src="../../js/common.js"></script>
    <script>
        $(function () {

            //导出文件
            $('.export').click(function () {
                // location.href = 'https://api.level01.club:12443/level/user/export?tokenId='+userInfo.tokenId;
                deltaGoAjax('user/export', "", function () {
                    location.href = 'https://api.level01.club:12443/level/user/export?tokenId=' +
                        userInfo.tokenId;
                }, 'get')

            })
            var ajaxData = {
                uuid: userInfo.uuid,
                startRow: '1',
                pageSize: '20',
                startTime: '',
                endTime: '',
            }
            $('.text').hide();
            $('.addTr').hide();
            $('.search').click(function(){
                ajaxData.mail = $('.mail').val();
                getData();
            })
            getData();

            function getData() {
                deltaGoAjax('user/getUserRecharge', ajaxData, getMemberData);
            }

            function getMemberData(data) {
                $('.child').remove();
                var str;
                if (data.data.list.length == 0) {
                    $('.text').show();
                    $('.addTr').hide();
                } else {
                    $('.addTr').show();
                    $('.text').hide();
                    $.each(data.data.list, function (k, val) {
                        str += '<tr class="child">' +
                            // '<td>' + (val.orderNo || '') + '</td>' +
                            '<td>' + (val.mail || '') + '</td>' +
                            '<td>' + formDate(val.creatTime || '') + '</td>' +
                            '<td>' + formDate(val.okTime || '') + '</td>' +
                            '<td>' + (val.stateName || '') + '</td>' +
                            '<td>' + moneyToFloat(val.usd || 0) + '</td>' +
                            '<td>' + moneyToFloat(val.rateNum || 0) + '</td>' +
                            '<td>' + moneyToFloat(val.commodityNum || 0) + '</td>' +
                            '<td>' + (val.rate || 0) + '</td>' +
                            '</tr>';
                    })
                    $('.addChild').append(str);
                    allPage = page(data, $('.pagination'), ajaxData.startRow);
                }
            }
            //    分页
            $('.pagination').on('click', '.starLi', function () { //首页
                ajaxData.startRow = '1';
                getData();
            })
            $('.pagination').on('click', '.numberLi', function () { //随意页
                ajaxData.startRow = $(this).text();
                getData();
            })
            $('.pagination').on('click', '.lastLi', function () { //尾页
                ajaxData.startRow = allPage;
                getData();
            })
            $('.pagination').on('click', '.gotoPageBtn', function () { //跳转到
                var gotoPageNum = $('.gotoPage').val();
                if (gotoPageNum == '') {
                    return;
                } else if (gotoPageNum > $(this).attr('data-page')) {
                    gotoPageNum = $(this).attr('data-page');
                }
                ajaxData.startRow = gotoPageNum;
                getData();
            })
        })
    </script>
</body>

</html>